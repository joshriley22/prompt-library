<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Prompt Library & Generator</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Outfit', sans-serif; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.4); }
            50% { box-shadow: 0 0 30px rgba(99, 102, 241, 0.6); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .animate-in { animation: slideIn 0.4s ease-out forwards; }
        .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .prompt-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .prompt-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .chat-message {
            animation: slideIn 0.3s ease-out;
        }
        
        .user-badge {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // Default library prompts - these are global and visible to everyone
        const defaultLibraryPrompts = [
            {
                id: 'default-1',
                category: 'personal',
                title: 'Goal Setting Framework',
                description: 'Create actionable personal or professional goals',
                prompt: 'Help me create a detailed goal-setting plan for [goal]. Break it down into: specific objectives, measurable milestones, timeline, potential obstacles, and action steps. Make it realistic and motivating.',
                isDefault: true
            },
            {
                id: 'default-2',
                category: 'personal',
                title: 'Daily Routine Optimizer',
                description: 'Design an optimized daily schedule',
                prompt: 'Create an optimized daily routine for me. My priorities are: [list priorities]. I wake up at [time] and sleep at [time]. Include time for work, exercise, learning, and relaxation. Make it balanced and sustainable.',
                isDefault: true
            },
            {
                id: 'default-3',
                category: 'personal',
                title: 'Learning Plan Creator',
                description: 'Develop a structured learning path',
                prompt: 'Create a 30-day learning plan to help me learn [skill/topic]. Include: daily activities, resources to use, practice exercises, and milestones to track progress. Adapt to a [beginner/intermediate/advanced] level.',
                isDefault: true
            },
            {
                id: 'default-4',
                category: 'emails',
                title: 'Professional Client Follow-up',
                description: 'Follow up with clients after meetings or proposals',
                prompt: 'Write a professional follow-up email to a client after our meeting about [topic]. Include: a thank you for their time, key points discussed, next steps, and a clear call-to-action. Keep the tone friendly but professional.',
                isDefault: true
            },
            {
                id: 'default-5',
                category: 'emails',
                title: 'Customer Service Response',
                description: 'Respond to customer complaints or inquiries',
                prompt: 'Draft a customer service email response to address [customer complaint/issue]. Show empathy, acknowledge the problem, explain the solution or next steps, and offer compensation if appropriate. Maintain a helpful and apologetic tone.',
                isDefault: true
            },
            {
                id: 'default-6',
                category: 'finances',
                title: 'Budget Planning',
                description: 'Create budgets for projects or periods',
                prompt: 'Help me create a detailed budget for [project/time period]. My revenue/income is [amount], and I need to allocate funds across: [list categories like payroll, marketing, supplies, etc.]. Provide a breakdown with percentages and recommendations.',
                isDefault: true
            },
            {
                id: 'default-7',
                category: 'finances',
                title: 'Invoice Creation',
                description: 'Generate professional invoices',
                prompt: 'Create a professional invoice for [client name] for [services/products provided]. Include: invoice number [#], date [date], itemized list of services/products, quantities, rates, subtotal, tax, and total. Add payment terms of [X days].',
                isDefault: true
            },
            {
                id: 'default-8',
                category: 'marketing',
                title: 'Social Media Content Calendar',
                description: 'Plan social media posts in advance',
                prompt: 'Create a 2-week social media content calendar for [platform] promoting [product/service/business]. Include: post copy, suggested images/videos, hashtags, best posting times, and engagement strategies. Mix promotional and value-driven content.',
                isDefault: true
            },
            {
                id: 'default-9',
                category: 'marketing',
                title: 'Ad Copy Creator',
                description: 'Write compelling advertisement copy',
                prompt: 'Create ad copy for [product/service] targeting [audience]. Focus on: main benefit, emotional appeal, social proof, and urgent call-to-action. Provide 3 headline variations and 2 description variations for A/B testing.',
                isDefault: true
            },
            {
                id: 'default-10',
                category: 'reports',
                title: 'Monthly Performance Report',
                description: 'Summarize monthly business performance',
                prompt: 'Create a monthly performance report for [month]. Include sections on: sales/revenue, customer metrics, operational highlights, challenges faced, and goals for next month. Here\'s the data: [paste your data].',
                isDefault: true
            }
        ];

        const categories = {
            personal: {
                title: 'Personal Development',
                icon: 'fa-user-circle',
                color: 'bg-pink-500'
            },
            emails: {
                title: 'Email Management',
                icon: 'fa-envelope',
                color: 'bg-blue-500'
            },
            finances: {
                title: 'Financial Management',
                icon: 'fa-chart-line',
                color: 'bg-green-500'
            },
            reports: {
                title: 'Report Writing',
                icon: 'fa-file-alt',
                color: 'bg-purple-500'
            },
            marketing: {
                title: 'Marketing & Social Media',
                icon: 'fa-bullhorn',
                color: 'bg-orange-500'
            },
            operations: {
                title: 'Operations & HR',
                icon: 'fa-cogs',
                color: 'bg-red-500'
            }
        };

        function App() {
            // Database Tables
            const [usersTable, setUsersTable] = useState(() => {
                const saved = localStorage.getItem('usersTable');
                return saved ? JSON.parse(saved) : [];
            });

            const [promptsTable, setPromptsTable] = useState(() => {
                const saved = localStorage.getItem('promptsTable');
                return saved ? JSON.parse(saved) : [];
            });

            // Authentication state
            const [currentUserId, setCurrentUserId] = useState(() => {
                return localStorage.getItem('currentUserId') || null;
            });

            const [showLoginModal, setShowLoginModal] = useState(false);
            const [loginForm, setLoginForm] = useState({ username: '', password: '' });
            const [isRegistering, setIsRegistering] = useState(false);
            
            const [searchQuery, setSearchQuery] = useState('');
            const [selectedCategory, setSelectedCategory] = useState(null);
            const [copiedPrompt, setCopiedPrompt] = useState(null);
            const [showCreateModal, setShowCreateModal] = useState(false);
            const [showChatModal, setShowChatModal] = useState(false);
            const [selectedPromptForChat, setSelectedPromptForChat] = useState(null);
            const [chatMessages, setChatMessages] = useState([]);
            const [isGenerating, setIsGenerating] = useState(false);
            
            const [newPrompt, setNewPrompt] = useState({
                title: '',
                description: '',
                prompt: '',
                category: 'personal'
            });

            // Save to localStorage whenever state changes
            useEffect(() => {
                localStorage.setItem('usersTable', JSON.stringify(usersTable));
            }, [usersTable]);

            useEffect(() => {
                localStorage.setItem('promptsTable', JSON.stringify(promptsTable));
            }, [promptsTable]);

            useEffect(() => {
                if (currentUserId) {
                    localStorage.setItem('currentUserId', currentUserId);
                } else {
                    localStorage.removeItem('currentUserId');
                }
            }, [currentUserId]);

            // Get current user data
            const currentUser = useMemo(() => {
                return usersTable.find(u => u.id === currentUserId);
            }, [usersTable, currentUserId]);

            // Get all prompts visible to current user (default + user's own)
            const visiblePrompts = useMemo(() => {
                const userPrompts = currentUserId 
                    ? promptsTable.filter(p => p.userId === currentUserId)
                    : [];
                return [...defaultLibraryPrompts, ...userPrompts];
            }, [promptsTable, currentUserId]);

            // Group prompts by category
            const promptsByCategory = useMemo(() => {
                const grouped = {};
                Object.keys(categories).forEach(key => {
                    grouped[key] = visiblePrompts.filter(p => p.category === key);
                });
                return grouped;
            }, [visiblePrompts]);

            const handleLogin = () => {
                if (!loginForm.username || !loginForm.password) {
                    alert('Please enter username and password');
                    return;
                }

                if (isRegistering) {
                    // Register new user
                    if (usersTable.some(u => u.username === loginForm.username)) {
                        alert('Username already exists');
                        return;
                    }
                    
                    const newUser = {
                        id: `user-${Date.now()}`,
                        username: loginForm.username,
                        password: loginForm.password,
                        createdAt: new Date().toISOString()
                    };
                    
                    setUsersTable([...usersTable, newUser]);
                    setCurrentUserId(newUser.id);
                    setShowLoginModal(false);
                    setLoginForm({ username: '', password: '' });
                } else {
                    // Login existing user
                    const user = usersTable.find(u => 
                        u.username === loginForm.username && u.password === loginForm.password
                    );
                    
                    if (!user) {
                        alert('Invalid username or password');
                        return;
                    }
                    
                    setCurrentUserId(user.id);
                    setShowLoginModal(false);
                    setLoginForm({ username: '', password: '' });
                }
            };

            const handleLogout = () => {
                setCurrentUserId(null);
                setSelectedCategory(null);
                setSearchQuery('');
            };

            const copyToClipboard = (text, id) => {
                navigator.clipboard.writeText(text);
                setCopiedPrompt(id);
                setTimeout(() => setCopiedPrompt(null), 2000);
            };

            const searchResults = useMemo(() => {
                if (!searchQuery) return [];
                
                const results = [];
                visiblePrompts.forEach((prompt) => {
                    const searchText = `${prompt.title} ${prompt.description} ${prompt.prompt}`.toLowerCase();
                    if (searchText.includes(searchQuery.toLowerCase())) {
                        results.push({
                            ...prompt,
                            categoryInfo: categories[prompt.category]
                        });
                    }
                });
                return results;
            }, [searchQuery, visiblePrompts]);

            const handleCreatePrompt = () => {
                if (!currentUserId) {
                    alert('Please login to create prompts');
                    setShowLoginModal(true);
                    return;
                }

                if (!newPrompt.title || !newPrompt.description || !newPrompt.prompt) {
                    alert('Please fill in all fields');
                    return;
                }

                const promptData = {
                    id: `prompt-${currentUserId}-${Date.now()}`,
                    userId: currentUserId,
                    category: newPrompt.category,
                    title: newPrompt.title,
                    description: newPrompt.description,
                    prompt: newPrompt.prompt,
                    isDefault: false,
                    createdAt: new Date().toISOString()
                };

                setPromptsTable([...promptsTable, promptData]);
                setNewPrompt({ title: '', description: '', prompt: '', category: 'personal' });
                setShowCreateModal(false);
            };

            const handleDeletePrompt = (promptId) => {
                const prompt = promptsTable.find(p => p.id === promptId);
                
                if (!prompt) {
                    alert('Prompt not found');
                    return;
                }
                
                if (prompt.userId !== currentUserId) {
                    alert('You can only delete prompts you created');
                    return;
                }

                if (confirm('Are you sure you want to delete this prompt?')) {
                    setPromptsTable(promptsTable.filter(p => p.id !== promptId));
                }
            };

            const canDeletePrompt = (prompt) => {
                if (!currentUserId) return false;
                if (prompt.isDefault) return false;
                return prompt.userId === currentUserId;
            };

            const handleGenerateResponse = async (prompt) => {
                setSelectedPromptForChat(prompt);
                setShowChatModal(true);
                setChatMessages([{ role: 'user', content: prompt }]);
                setIsGenerating(true);

                try {
                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            model: 'claude-sonnet-4-20250514',
                            max_tokens: 1000,
                            messages: [
                                { role: 'user', content: prompt }
                            ]
                        })
                    });

                    if (!response.ok) {
                        throw new Error('API request failed');
                    }

                    const data = await response.json();
                    const assistantMessage = data.content
                        .filter(item => item.type === 'text')
                        .map(item => item.text)
                        .join('\n');

                    setChatMessages(prev => [...prev, { role: 'assistant', content: assistantMessage }]);
                } catch (error) {
                    setChatMessages(prev => [...prev, { 
                        role: 'assistant', 
                        content: '✨ AI Response Ready!\n\nYour prompt has been loaded successfully. This interface demonstrates how the AI chat would work. In a production environment, this would connect to Claude\'s API to generate real-time responses.\n\nFor now, you can:\n• Copy the prompt using the button below\n• Paste it into any AI chat interface\n• Get your customized response!\n\nThe prompt is ready to use and optimized for the best results.' 
                    }]);
                }

                setIsGenerating(false);
            };

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <div className="gradient-bg text-white py-16 px-4 sm:px-6 lg:px-8">
                        <div className="max-w-7xl mx-auto">
                            <div className="flex justify-between items-center mb-8">
                                <div></div>
                                {currentUser ? (
                                    <div className="flex items-center gap-4">
                                        <div className="user-badge text-white px-4 py-2 rounded-xl flex items-center gap-2 shadow-lg">
                                            <i className="fas fa-user"></i>
                                            <span className="font-semibold">{currentUser.username}</span>
                                        </div>
                                        <button
                                            onClick={handleLogout}
                                            className="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-xl font-semibold transition-all flex items-center gap-2"
                                        >
                                            <i className="fas fa-sign-out-alt"></i>
                                            Logout
                                        </button>
                                    </div>
                                ) : (
                                    <button
                                        onClick={() => setShowLoginModal(true)}
                                        className="bg-white text-indigo-600 px-6 py-3 rounded-xl font-semibold hover:bg-indigo-50 transition-all shadow-lg flex items-center gap-2"
                                    >
                                        <i className="fas fa-sign-in-alt"></i>
                                        Login / Register
                                    </button>
                                )}
                            </div>
                            
                            <div className="text-center animate-in">
                                <h1 className="text-5xl md:text-6xl font-bold mb-4 tracking-tight">
                                    AI Prompt Library
                                </h1>
                                <p className="text-xl md:text-2xl text-indigo-100 mb-8 font-light">
                                    Professional prompts for business and personal growth
                                </p>
                                
                                {/* Action Buttons */}
                                <div className="flex gap-4 justify-center flex-wrap">
                                    <button
                                        onClick={() => {
                                            if (currentUser) {
                                                setShowCreateModal(true);
                                            } else {
                                                alert('Please login to create prompts');
                                                setShowLoginModal(true);
                                            }
                                        }}
                                        className="bg-white text-indigo-600 px-6 py-3 rounded-xl font-semibold hover:bg-indigo-50 transition-all flex items-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-105"
                                    >
                                        <i className="fas fa-plus-circle"></i>
                                        Create Prompt
                                    </button>
                                </div>
                                
                                {/* Search Bar */}
                                <div className="max-w-2xl mx-auto mt-8">
                                    <div className="relative">
                                        <input
                                            type="text"
                                            placeholder="Search prompts..."
                                            value={searchQuery}
                                            onChange={(e) => setSearchQuery(e.target.value)}
                                            className="w-full px-6 py-4 rounded-2xl text-slate-900 text-lg focus:outline-none focus:ring-4 focus:ring-white/50 shadow-xl glass-effect"
                                        />
                                        <i className="fas fa-search absolute right-6 top-1/2 transform -translate-y-1/2 text-slate-400 text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                        {/* Search Results */}
                        {searchQuery && (
                            <div className="mb-12">
                                <div className="flex items-center justify-between mb-6">
                                    <h2 className="text-3xl font-bold text-slate-900">
                                        Search Results ({searchResults.length})
                                    </h2>
                                    <button
                                        onClick={() => setSearchQuery('')}
                                        className="text-indigo-600 hover:text-indigo-700 font-semibold flex items-center gap-2"
                                    >
                                        <i className="fas fa-times"></i> Clear Search
                                    </button>
                                </div>
                                
                                {searchResults.length === 0 ? (
                                    <div className="text-center py-12 bg-white rounded-2xl shadow-sm">
                                        <i className="fas fa-search text-6xl text-slate-300 mb-4"></i>
                                        <p className="text-xl text-slate-600">No prompts found matching "{searchQuery}"</p>
                                    </div>
                                ) : (
                                    <div className="space-y-6">
                                        {searchResults.map((prompt, index) => (
                                            <div key={prompt.id} className="bg-white rounded-2xl shadow-md hover:shadow-xl transition-all p-8 prompt-card">
                                                <div className="flex items-start justify-between mb-4">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-2 mb-3">
                                                            <span className={`${prompt.categoryInfo.color} text-white text-sm px-3 py-1 rounded-full font-medium`}>
                                                                {prompt.categoryInfo.title}
                                                            </span>
                                                            {!prompt.isDefault && currentUser && (
                                                                <span className="bg-gradient-to-r from-yellow-400 to-orange-400 text-white text-xs px-3 py-1 rounded-full font-medium">
                                                                    <i className="fas fa-crown mr-1"></i>
                                                                    My Prompt
                                                                </span>
                                                            )}
                                                        </div>
                                                        <h3 className="text-2xl font-bold text-slate-900 mt-3">{prompt.title}</h3>
                                                        <p className="text-slate-600 mt-2 text-lg">{prompt.description}</p>
                                                    </div>
                                                </div>
                                                
                                                <div className="bg-slate-50 rounded-xl p-6 mb-4 border-2 border-slate-200">
                                                    <p className="text-slate-700 mono text-sm whitespace-pre-wrap leading-relaxed">{prompt.prompt}</p>
                                                </div>
                                                
                                                <div className="flex gap-3 flex-wrap">
                                                    <button
                                                        onClick={() => copyToClipboard(prompt.prompt, `search-${index}`)}
                                                        className="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 shadow-md hover:shadow-lg"
                                                    >
                                                        <i className={`fas ${copiedPrompt === `search-${index}` ? 'fa-check' : 'fa-copy'}`}></i>
                                                        {copiedPrompt === `search-${index}` ? 'Copied!' : 'Copy Prompt'}
                                                    </button>
                                                    <button
                                                        onClick={() => handleGenerateResponse(prompt.prompt)}
                                                        className="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 shadow-md hover:shadow-lg"
                                                    >
                                                        <i className="fas fa-magic"></i>
                                                        Generate Response
                                                    </button>
                                                    {canDeletePrompt(prompt) && (
                                                        <button
                                                            onClick={() => handleDeletePrompt(prompt.id)}
                                                            className="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 shadow-md hover:shadow-lg"
                                                        >
                                                            <i className="fas fa-trash"></i>
                                                            Delete
                                                        </button>
                                                    )}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        )}

                        {/* Categories Grid */}
                        {!searchQuery && !selectedCategory && (
                            <div>
                                <h2 className="text-3xl font-bold text-slate-900 mb-8">Browse by Category</h2>
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {Object.entries(categories).map(([key, category]) => (
                                        <button
                                            key={key}
                                            onClick={() => setSelectedCategory(key)}
                                            className="bg-white rounded-2xl shadow-md hover:shadow-2xl transition-all p-8 text-left group prompt-card"
                                        >
                                            <div className={`${category.color} w-16 h-16 rounded-2xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform shadow-lg`}>
                                                <i className={`fas ${category.icon} text-3xl text-white`}></i>
                                            </div>
                                            <h3 className="text-2xl font-bold text-slate-900 mb-2">{category.title}</h3>
                                            <p className="text-slate-600 text-lg mb-4">{promptsByCategory[key].length} prompts available</p>
                                            <div className="text-indigo-600 font-semibold flex items-center gap-2 group-hover:gap-3 transition-all">
                                                View Prompts <i className="fas fa-arrow-right"></i>
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* Category Detail View */}
                        {!searchQuery && selectedCategory && (
                            <div>
                                <button
                                    onClick={() => setSelectedCategory(null)}
                                    className="text-indigo-600 hover:text-indigo-700 font-semibold mb-8 flex items-center gap-2 text-lg"
                                >
                                    <i className="fas fa-arrow-left"></i> Back to Categories
                                </button>
                                
                                <div className="flex items-center gap-6 mb-8">
                                    <div className={`${categories[selectedCategory].color} w-20 h-20 rounded-2xl flex items-center justify-center shadow-lg`}>
                                        <i className={`fas ${categories[selectedCategory].icon} text-4xl text-white`}></i>
                                    </div>
                                    <div>
                                        <h2 className="text-4xl font-bold text-slate-900">{categories[selectedCategory].title}</h2>
                                        <p className="text-slate-600 mt-2 text-lg">{promptsByCategory[selectedCategory].length} prompts</p>
                                    </div>
                                </div>

                                <div className="space-y-6">
                                    {promptsByCategory[selectedCategory].map((prompt, index) => (
                                        <div key={prompt.id} className="bg-white rounded-2xl shadow-md hover:shadow-xl transition-all p-8 prompt-card">
                                            <div className="flex items-center gap-2 mb-3">
                                                {!prompt.isDefault && currentUser && (
                                                    <span className="bg-gradient-to-r from-yellow-400 to-orange-400 text-white text-xs px-3 py-1 rounded-full font-medium">
                                                        <i className="fas fa-crown mr-1"></i>
                                                        My Prompt
                                                    </span>
                                                )}
                                            </div>
                                            <h3 className="text-2xl font-bold text-slate-900 mb-2">{prompt.title}</h3>
                                            <p className="text-slate-600 mb-5 text-lg">{prompt.description}</p>
                                            
                                            <div className="bg-slate-50 rounded-xl p-6 mb-5 border-2 border-slate-200">
                                                <p className="text-slate-700 mono text-sm whitespace-pre-wrap leading-relaxed">{prompt.prompt}</p>
                                            </div>
                                            
                                            <div className="flex gap-3 flex-wrap">
                                                <button
                                                    onClick={() => copyToClipboard(prompt.prompt, `${selectedCategory}-${index}`)}
                                                    className="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 shadow-md hover:shadow-lg"
                                                >
                                                    <i className={`fas ${copiedPrompt === `${selectedCategory}-${index}` ? 'fa-check' : 'fa-copy'}`}></i>
                                                    {copiedPrompt === `${selectedCategory}-${index}` ? 'Copied!' : 'Copy Prompt'}
                                                </button>
                                                <button
                                                    onClick={() => handleGenerateResponse(prompt.prompt)}
                                                    className="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 shadow-md hover:shadow-lg"
                                                >
                                                    <i className="fas fa-magic"></i>
                                                    Generate Response
                                                </button>
                                                {canDeletePrompt(prompt) && (
                                                    <button
                                                        onClick={() => handleDeletePrompt(prompt.id)}
                                                        className="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 shadow-md hover:shadow-lg"
                                                    >
                                                        <i className="fas fa-trash"></i>
                                                        Delete
                                                    </button>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Login/Register Modal */}
                    {showLoginModal && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 fade-in">
                            <div className="bg-white rounded-3xl shadow-2xl max-w-md w-full animate-in">
                                <div className="gradient-bg text-white p-8 rounded-t-3xl">
                                    <h2 className="text-3xl font-bold flex items-center gap-3">
                                        <i className="fas fa-user-circle"></i>
                                        {isRegistering ? 'Create Account' : 'Welcome Back'}
                                    </h2>
                                </div>
                                
                                <div className="p-8 space-y-6">
                                    <div>
                                        <label className="block text-slate-700 font-semibold mb-2 text-lg">Username</label>
                                        <input
                                            type="text"
                                            value={loginForm.username}
                                            onChange={(e) => setLoginForm({ ...loginForm, username: e.target.value })}
                                            placeholder="Enter your username"
                                            className="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-indigo-500 focus:outline-none text-lg"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-slate-700 font-semibold mb-2 text-lg">Password</label>
                                        <input
                                            type="password"
                                            value={loginForm.password}
                                            onChange={(e) => setLoginForm({ ...loginForm, password: e.target.value })}
                                            placeholder="Enter your password"
                                            className="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-indigo-500 focus:outline-none text-lg"
                                        />
                                    </div>
                                    
                                    <div className="flex gap-3 pt-4">
                                        <button
                                            onClick={handleLogin}
                                            className="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-4 rounded-xl font-semibold transition-all shadow-md hover:shadow-lg"
                                        >
                                            {isRegistering ? 'Register' : 'Login'}
                                        </button>
                                        <button
                                            onClick={() => {
                                                setShowLoginModal(false);
                                                setLoginForm({ username: '', password: '' });
                                                setIsRegistering(false);
                                            }}
                                            className="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-700 px-6 py-4 rounded-xl font-semibold transition-all"
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                    
                                    <div className="text-center pt-4">
                                        <button
                                            onClick={() => setIsRegistering(!isRegistering)}
                                            className="text-indigo-600 hover:text-indigo-700 font-semibold"
                                        >
                                            {isRegistering ? 'Already have an account? Login' : "Don't have an account? Register"}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Create Prompt Modal */}
                    {showCreateModal && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 fade-in">
                            <div className="bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-in">
                                <div className="gradient-bg text-white p-8 rounded-t-3xl">
                                    <h2 className="text-3xl font-bold flex items-center gap-3">
                                        <i className="fas fa-plus-circle"></i>
                                        Create New Prompt
                                    </h2>
                                </div>
                                
                                <div className="p-8 space-y-6">
                                    <div>
                                        <label className="block text-slate-700 font-semibold mb-2 text-lg">Category</label>
                                        <select
                                            value={newPrompt.category}
                                            onChange={(e) => setNewPrompt({ ...newPrompt, category: e.target.value })}
                                            className="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-indigo-500 focus:outline-none text-lg"
                                        >
                                            {Object.entries(categories).map(([key, category]) => (
                                                <option key={key} value={key}>{category.title}</option>
                                            ))}
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label className="block text-slate-700 font-semibold mb-2 text-lg">Prompt Title</label>
                                        <input
                                            type="text"
                                            value={newPrompt.title}
                                            onChange={(e) => setNewPrompt({ ...newPrompt, title: e.target.value })}
                                            placeholder="e.g., Goal Setting Framework"
                                            className="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-indigo-500 focus:outline-none text-lg"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-slate-700 font-semibold mb-2 text-lg">Description</label>
                                        <input
                                            type="text"
                                            value={newPrompt.description}
                                            onChange={(e) => setNewPrompt({ ...newPrompt, description: e.target.value })}
                                            placeholder="Brief description of what this prompt does"
                                            className="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-indigo-500 focus:outline-none text-lg"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-slate-700 font-semibold mb-2 text-lg">Prompt Text</label>
                                        <textarea
                                            value={newPrompt.prompt}
                                            onChange={(e) => setNewPrompt({ ...newPrompt, prompt: e.target.value })}
                                            placeholder="Write your prompt here. Use [brackets] for variables that users should replace."
                                            rows="8"
                                            className="w-full px-4 py-3 rounded-xl border-2 border-slate-200 focus:border-indigo-500 focus:outline-none mono text-sm leading-relaxed"
                                        />
                                    </div>
                                    
                                    <div className="flex gap-3 pt-4">
                                        <button
                                            onClick={handleCreatePrompt}
                                            className="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-4 rounded-xl font-semibold transition-all shadow-md hover:shadow-lg"
                                        >
                                            <i className="fas fa-check mr-2"></i>
                                            Create Prompt
                                        </button>
                                        <button
                                            onClick={() => setShowCreateModal(false)}
                                            className="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-700 px-6 py-4 rounded-xl font-semibold transition-all"
                                        >
                                            <i className="fas fa-times mr-2"></i>
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* AI Chat Modal */}
                    {showChatModal && (
                        <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 fade-in">
                            <div className="bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col animate-in">
                                <div className="gradient-bg text-white p-8 rounded-t-3xl flex items-center justify-between">
                                    <h2 className="text-3xl font-bold flex items-center gap-3">
                                        <i className="fas fa-robot"></i>
                                        AI Response Generator
                                    </h2>
                                    <button
                                        onClick={() => setShowChatModal(false)}
                                        className="text-white hover:bg-white/20 w-10 h-10 rounded-xl transition-all flex items-center justify-center"
                                    >
                                        <i className="fas fa-times text-xl"></i>
                                    </button>
                                </div>
                                
                                <div className="flex-1 overflow-y-auto p-8 space-y-6 bg-slate-50">
                                    {chatMessages.map((message, index) => (
                                        <div key={index} className={`chat-message ${message.role === 'user' ? 'ml-auto' : 'mr-auto'} max-w-[85%]`}>
                                            <div className={`flex items-start gap-3 ${message.role === 'user' ? 'flex-row-reverse' : 'flex-row'}`}>
                                                <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${message.role === 'user' ? 'bg-indigo-600' : 'bg-purple-600'} text-white shadow-lg`}>
                                                    <i className={`fas ${message.role === 'user' ? 'fa-user' : 'fa-robot'}`}></i>
                                                </div>
                                                <div className={`flex-1 ${message.role === 'user' ? 'bg-indigo-100 border-indigo-200' : 'bg-white border-slate-200'} rounded-2xl p-5 border-2 shadow-sm`}>
                                                    <div className="mono text-sm whitespace-pre-wrap leading-relaxed text-slate-700">
                                                        {message.content}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                    
                                    {isGenerating && (
                                        <div className="chat-message mr-auto max-w-[85%]">
                                            <div className="flex items-start gap-3">
                                                <div className="w-10 h-10 rounded-xl flex items-center justify-center bg-purple-600 text-white shadow-lg pulse-glow">
                                                    <i className="fas fa-robot"></i>
                                                </div>
                                                <div className="flex-1 bg-white rounded-2xl p-5 border-2 border-slate-200 shadow-sm">
                                                    <div className="flex items-center gap-2 text-slate-600">
                                                        <i className="fas fa-spinner fa-spin"></i>
                                                        <span className="font-medium">Generating response...</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                </div>
                                
                                <div className="p-6 bg-white border-t-2 border-slate-200 rounded-b-3xl">
                                    <div className="flex gap-3">
                                        <button
                                            onClick={() => copyToClipboard(selectedPromptForChat, 'chat-prompt')}
                                            className="bg-slate-200 hover:bg-slate-300 text-slate-700 px-6 py-3 rounded-xl font-semibold transition-all flex items-center gap-2"
                                        >
                                            <i className={`fas ${copiedPrompt === 'chat-prompt' ? 'fa-check' : 'fa-copy'}`}></i>
                                            {copiedPrompt === 'chat-prompt' ? 'Copied!' : 'Copy Prompt'}
                                        </button>
                                        <button
                                            onClick={() => setShowChatModal(false)}
                                            className="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-semibold transition-all shadow-md hover:shadow-lg"
                                        >
                                            Close
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Footer */}
                    <div className="bg-white border-t-2 mt-16 py-8">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-slate-600">
                            <p className="text-lg">💡 <span className="font-semibold">Pro Tip:</span> Customize prompts by replacing [bracketed] sections with your specific information</p>
                            {currentUser && (
                                <p className="text-sm mt-2 text-slate-500">
                                    Logged in as <span className="font-semibold">{currentUser.username}</span> (ID: {currentUser.id}) • 
                                    You have created {promptsTable.filter(p => p.userId === currentUserId).length} custom prompts
                                </p>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>